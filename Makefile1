CC=gcc
BINFLAGS=-O -Wall -g -lm -lpthread -lcrypto -Isrc/external/json-parser -Isrc/external/ldb -L. -lldb 
SOURCES=src/main.c src/limits.c src/scanoss.c src/blacklist.c src/scan.c src/psi.c src/keywords.c src/match.c src/report.c src/spdx.c src/cyclonedx.c src/copyright.c src/vulnerability.c src/quality.c src/license.c src/dependency.c src/file.c src/parse.c src/query.c src/util.c src/debug.c src/external/json-parser/json.c
all: clean scanoss

scanoss: src/main.c src/scanoss.h src/limits.h 
	@$(CC) -o scanoss $(SOURCES) $(BINFLAGS)
	@export LD_LIBRARY_PATH=.:$LD_LIBRARY_PATH
	@echo Scanoss built

clean:
	@echo Cleaning...
	@rm -f scanoss *.o

distclean: clean

install:
	@cp libldb.so /usr/lib
	@cp scanoss /usr/bin
